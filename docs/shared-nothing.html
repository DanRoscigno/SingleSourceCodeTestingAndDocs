<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-shared-nothing" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.1.1">
<title data-rh="true">StarRocks basics | My Site</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://danroscigno.github.io/SingleSourceCodeTestingAndDocs/img/docusaurus-social-card.jpg"><meta data-rh="true" name="twitter:image" content="https://danroscigno.github.io/SingleSourceCodeTestingAndDocs/img/docusaurus-social-card.jpg"><meta data-rh="true" property="og:url" content="https://danroscigno.github.io/SingleSourceCodeTestingAndDocs/docs/shared-nothing"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="StarRocks basics | My Site"><meta data-rh="true" name="description" content="This tutorial covers:"><meta data-rh="true" property="og:description" content="This tutorial covers:"><link data-rh="true" rel="icon" href="/SingleSourceCodeTestingAndDocs/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://danroscigno.github.io/SingleSourceCodeTestingAndDocs/docs/shared-nothing"><link data-rh="true" rel="alternate" href="https://danroscigno.github.io/SingleSourceCodeTestingAndDocs/docs/shared-nothing" hreflang="en"><link data-rh="true" rel="alternate" href="https://danroscigno.github.io/SingleSourceCodeTestingAndDocs/docs/shared-nothing" hreflang="x-default"><link rel="stylesheet" href="/SingleSourceCodeTestingAndDocs/assets/css/styles.38ea4765.css">
<script src="/SingleSourceCodeTestingAndDocs/assets/js/runtime~main.2f778fef.js" defer="defer"></script>
<script src="/SingleSourceCodeTestingAndDocs/assets/js/main.1b59e738.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/SingleSourceCodeTestingAndDocs/docs"><div class="navbar__logo"><img src="/SingleSourceCodeTestingAndDocs/img/logo.svg" alt="My Site Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/SingleSourceCodeTestingAndDocs/img/logo.svg" alt="My Site Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">My Site</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/SingleSourceCodeTestingAndDocs/docs">Tutorial</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/facebook/docusaurus" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/SingleSourceCodeTestingAndDocs/docs">Embedding snippets of code from GitHub</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" href="/SingleSourceCodeTestingAndDocs/docs/shared-nothing">StarRocks basics</a></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">StarRocks basics</span><meta itemprop="position" content="1"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><h1>StarRocks basics</h1>
<p>This tutorial covers:</p>
<ul>
<li>Running StarRocks in a single Docker container</li>
<li>Loading two public datasets including basic transformation of the data</li>
<li>Analyzing the data with SELECT and JOIN</li>
<li>Basic data transformation (the <strong>T</strong> in ETL)</li>
</ul>
<p>The data used is provided by NYC OpenData and the National Centers for Environmental Information.</p>
<p>Both of these datasets are very large, and because this tutorial is intended to help you get exposed to working with StarRocks we are not going to load data for the past 120 years. You can run the Docker image and load this data on a machine with 4 GB RAM assigned to Docker. For larger fault-tolerant and scalable deployments we have other documentation and will provide that later.</p>
<p>There is a lot of information in this document, and it is presented with the step by step content at the beginning, and the technical details at the end. This is done to serve these purposes in this order:</p>
<ol>
<li>Allow the reader to load data in StarRocks and analyze that data.</li>
<li>Explain the basics of data transformation during loading.</li>
</ol>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="prerequisites">Prerequisites<a href="#prerequisites" class="hash-link" aria-label="Direct link to Prerequisites" title="Direct link to Prerequisites">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="docker">Docker<a href="#docker" class="hash-link" aria-label="Direct link to Docker" title="Direct link to Docker">​</a></h3>
<ul>
<li><a href="https://docs.docker.com/engine/install/" target="_blank" rel="noopener noreferrer">Docker</a></li>
<li>4 GB RAM assigned to Docker</li>
<li>10 GB free disk space assigned to Docker</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="sql-client">SQL client<a href="#sql-client" class="hash-link" aria-label="Direct link to SQL client" title="Direct link to SQL client">​</a></h3>
<p>You can use the SQL client provided in the Docker environment, or use one on your system. Many MySQL compatible clients will work, and this guide covers the configuration of DBeaver and MySQL WorkBench.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="curl">curl<a href="#curl" class="hash-link" aria-label="Direct link to curl" title="Direct link to curl">​</a></h3>
<p><code>curl</code> is used to issue the data load job to StarRocks, and to download the datasets. Check to see if you have it installed by running <code>curl</code> or <code>curl.exe</code> at your OS prompt. If curl is not installed, <a href="https://curl.se/dlwiz/?type=bin" target="_blank" rel="noopener noreferrer">get curl here</a>.</p>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="terminology">Terminology<a href="#terminology" class="hash-link" aria-label="Direct link to Terminology" title="Direct link to Terminology">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="fe">FE<a href="#fe" class="hash-link" aria-label="Direct link to FE" title="Direct link to FE">​</a></h3>
<p>Frontend nodes are responsible for metadata management, client connection management, query planning, and query scheduling. Each FE stores and maintains a complete copy of metadata in its memory, which guarantees indiscriminate services among the FEs.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="be">BE<a href="#be" class="hash-link" aria-label="Direct link to BE" title="Direct link to BE">​</a></h3>
<p>Backend nodes are responsible for both data storage and executing query plans.</p>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="launch-starrocks">Launch StarRocks<a href="#launch-starrocks" class="hash-link" aria-label="Direct link to Launch StarRocks" title="Direct link to Launch StarRocks">​</a></h2>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">docker run -p 9030:9030 -p 8030:8030 -p 8040:8040 -itd \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">--name quickstart starrocks/allin1-ubuntu</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="sql-clients">SQL clients<a href="#sql-clients" class="hash-link" aria-label="Direct link to SQL clients" title="Direct link to SQL clients">​</a></h2>
<p>These three clients are tested with this tutorial, you only need one:</p>
<ul>
<li>mysql CLI: You can run this from the Docker environment or your machine.</li>
<li><a href="https://dbeaver.io/download/" target="_blank" rel="noopener noreferrer">DBeaver</a> is available as a community version and a Pro version.</li>
<li><a href="https://dev.mysql.com/downloads/workbench/" target="_blank" rel="noopener noreferrer">MySQL Workbench</a></li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="configuring-the-client">Configuring the client<a href="#configuring-the-client" class="hash-link" aria-label="Direct link to Configuring the client" title="Direct link to Configuring the client">​</a></h4>
<div class="tabs-container tabList__CuJ"><ul role="tablist" aria-orientation="horizontal" class="tabs"><li role="tab" tabindex="0" aria-selected="true" class="tabs__item tabItem_LNqP tabs__item--active">mysql CLI</li><li role="tab" tabindex="-1" aria-selected="false" class="tabs__item tabItem_LNqP">DBeaver</li><li role="tab" tabindex="-1" aria-selected="false" class="tabs__item tabItem_LNqP">MySQL Workbench</li></ul><div class="margin-top--md"><div role="tabpanel" class="tabItem_Ymn6"><p>The easiest way to use the mysql CLI is to run it from the StarRocks container <code>starrocks-fe</code>:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">docker exec -it quickstart \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">mysql -P 9030 -h 127.0.0.1 -u root --prompt=&quot;StarRocks &gt; &quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>If you would like to install the mysql CLI expand <strong>mysql client install</strong> below:</p><details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary>mysql client install</summary><div><div class="collapsibleContent_i85q"><ul>
<li>macOS: If you use Homebrew and do not need MySQL Server run <code>brew install mysql</code> to install the CLI.</li>
<li>Linux: Check your repository system for the <code>mysql</code> client. For example, <code>yum install mariadb</code>.</li>
<li>Microsoft Windows: Install the <a href="https://dev.mysql.com/downloads/mysql/" target="_blank" rel="noopener noreferrer">MySQL Community Server</a> and run the provided client, or run <code>mysql</code> from WSL.</li>
</ul></div></div></details></div><div role="tabpanel" class="tabItem_Ymn6" hidden=""><ul>
<li>Install <a href="https://dbeaver.io/download/" target="_blank" rel="noopener noreferrer">DBeaver</a>, and add a connection:
<img decoding="async" loading="lazy" alt="Add a connection" src="/SingleSourceCodeTestingAndDocs/assets/images/DBeaver-1-58907bd9df44bba1e40282214e4a056c.png" width="972" height="170" class="img_ev3q"></li>
<li>Configure the port, IP, and username. Test the connection, and click Finish if the test succeeds:
<img decoding="async" loading="lazy" alt="Configure and test" src="/SingleSourceCodeTestingAndDocs/assets/images/DBeaver-2-8e4bdc09135b4738944d7016bfb1af94.png" width="1340" height="1102" class="img_ev3q"></li>
</ul></div><div role="tabpanel" class="tabItem_Ymn6" hidden=""><ul>
<li>Install the <a href="https://dev.mysql.com/downloads/workbench/" target="_blank" rel="noopener noreferrer">MySQL Workbench</a>, and add a connection.</li>
<li>Configure the port, IP, and username and then test the connection:
<img decoding="async" loading="lazy" alt="Connection settings" src="/SingleSourceCodeTestingAndDocs/assets/images/Workbench-1-9fd3a3126d5f83478e51891287e412b9.png" width="1594" height="998" class="img_ev3q"></li>
<li>You will see warnings from the Workbench as it is checking for a specific MySQL version. You can ignore the warnings and when prompted, you can configure Workbench to stop displaying the warnings:
<img decoding="async" loading="lazy" alt="Ignore warning" src="/SingleSourceCodeTestingAndDocs/assets/images/Workbench-2-efba18763e56101091746837ae666b5e.png" width="1030" height="602" class="img_ev3q"></li>
</ul></div></div></div>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="download-the-data">Download the data<a href="#download-the-data" class="hash-link" aria-label="Direct link to Download the data" title="Direct link to Download the data">​</a></h2>
<p>Download these two datasets to your machine. You can download them to the host machine where you are running Docker, they do not need to be downloaded inside the container.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="new-york-city-crash-data">New York City crash data<a href="#new-york-city-crash-data" class="hash-link" aria-label="Direct link to New York City crash data" title="Direct link to New York City crash data">​</a></h3>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">curl -O https://raw.githubusercontent.com/StarRocks/demo/master/documentation-samples/quickstart/datasets/NYPD_Crash_Data.csv</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="weather-data">Weather data<a href="#weather-data" class="hash-link" aria-label="Direct link to Weather data" title="Direct link to Weather data">​</a></h3>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">curl -O https://raw.githubusercontent.com/StarRocks/demo/master/documentation-samples/quickstart/datasets/72505394728.csv</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<hr>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="connect-to-starrocks-with-a-sql-client">Connect to StarRocks with a SQL client<a href="#connect-to-starrocks-with-a-sql-client" class="hash-link" aria-label="Direct link to Connect to StarRocks with a SQL client" title="Direct link to Connect to StarRocks with a SQL client">​</a></h3>
<div class="theme-admonition theme-admonition-tip admonition_xJq3 alert alert--success"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</div><div class="admonitionContent_BuS1"><p>If you are using a client other than the mysql CLI, open that now.</p></div></div>
<p>This command will run the <code>mysql</code> command in the Docker container:</p>
<div class="language-sql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sql codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">docker </span><span class="token keyword" style="color:#00009f">exec</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">-</span><span class="token plain">it quickstart \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">mysql </span><span class="token operator" style="color:#393A34">-</span><span class="token plain">P </span><span class="token number" style="color:#36acaa">9030</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">-</span><span class="token plain">h </span><span class="token number" style="color:#36acaa">127.0</span><span class="token number" style="color:#36acaa">.0</span><span class="token number" style="color:#36acaa">.1</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">-</span><span class="token plain">u root </span><span class="token comment" style="color:#999988;font-style:italic">--prompt=&quot;StarRocks &gt; &quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="create-some-tables">Create some tables<a href="#create-some-tables" class="hash-link" aria-label="Direct link to Create some tables" title="Direct link to Create some tables">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="create-a-database">Create a database<a href="#create-a-database" class="hash-link" aria-label="Direct link to Create a database" title="Direct link to Create a database">​</a></h3>
<p>Type these two lines in at the <code>StarRocks &gt; </code> prompt and press enter after each:</p>
<div class="language-sql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sql codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">CREATE</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">DATABASE</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">IF</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">NOT</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">EXISTS</span><span class="token plain"> quickstart</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">USE</span><span class="token plain"> quickstart</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="create-two-tables">Create two tables<a href="#create-two-tables" class="hash-link" aria-label="Direct link to Create two tables" title="Direct link to Create two tables">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="crashdata">Crashdata<a href="#crashdata" class="hash-link" aria-label="Direct link to Crashdata" title="Direct link to Crashdata">​</a></h4>
<p>The crash dataset contains many more fields than these, the schema has been trimmed
down to include only the fields that might be useful to answer questions about the
impact weather has on driving conditions.</p>
<div class="language-sql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sql codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">CREATE</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">TABLE</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">IF</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">NOT</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">EXISTS</span><span class="token plain"> crashdata </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    CRASH_DATE </span><span class="token keyword" style="color:#00009f">DATETIME</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    BOROUGH STRING</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ZIP_CODE STRING</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    LATITUDE </span><span class="token keyword" style="color:#00009f">INT</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    LONGITUDE </span><span class="token keyword" style="color:#00009f">INT</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    LOCATION STRING</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ON_STREET_NAME STRING</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    CROSS_STREET_NAME STRING</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    OFF_STREET_NAME STRING</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    CONTRIBUTING_FACTOR_VEHICLE_1 STRING</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    CONTRIBUTING_FACTOR_VEHICLE_2 STRING</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    COLLISION_ID </span><span class="token keyword" style="color:#00009f">INT</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    VEHICLE_TYPE_CODE_1 STRING</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    VEHICLE_TYPE_CODE_2 STRING</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="weatherdata">Weatherdata<a href="#weatherdata" class="hash-link" aria-label="Direct link to Weatherdata" title="Direct link to Weatherdata">​</a></h4>
<p>Similar to the crash data, the weather dataset has many more columns (a total of
125 columns) and only the ones that are expected to answer the questions are
included in the database.</p>
<div class="language-sql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sql codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">CREATE</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">TABLE</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">IF</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">NOT</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">EXISTS</span><span class="token plain"> weatherdata </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">DATE</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">DATETIME</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    NAME STRING</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    HourlyDewPointTemperature STRING</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    HourlyDryBulbTemperature STRING</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    HourlyPrecipitation STRING</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    HourlyPresentWeatherType STRING</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    HourlyPressureChange STRING</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    HourlyPressureTendency STRING</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    HourlyRelativeHumidity STRING</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    HourlySkyConditions STRING</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    HourlyVisibility STRING</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    HourlyWetBulbTemperature STRING</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    HourlyWindDirection STRING</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    HourlyWindGustSpeed STRING</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    HourlyWindSpeed STRING</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="load-two-datasets">Load two datasets<a href="#load-two-datasets" class="hash-link" aria-label="Direct link to Load two datasets" title="Direct link to Load two datasets">​</a></h2>
<p>There are many ways to load data into StarRocks. For this tutorial the simplest way is to use curl and StarRocks Stream Load.</p>
<div class="theme-admonition theme-admonition-tip admonition_xJq3 alert alert--success"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</div><div class="admonitionContent_BuS1"><p>Open a new shell as these curl commands are run at the operating system prompt, not in the <code>mysql</code> client. The commands refer to the datasets that you downloaded, so run them from the directory where you downloaded the files.</p><p>You will be prompted for a password. You probably have not assigned a password to the MySQL <code>root</code> user, so just hit enter.</p></div></div>
<p>The <code>curl</code> commands look complex, but they are explained in detail at the end of the tutorial. For now, we recommend running the commands and running some SQL to analyze the data, and then reading about the data loading details at the end.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="new-york-city-collision-data---crashes">New York City collision data - Crashes<a href="#new-york-city-collision-data---crashes" class="hash-link" aria-label="Direct link to New York City collision data - Crashes" title="Direct link to New York City collision data - Crashes">​</a></h3>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">curl --location-trusted -u root             \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    -T ./NYPD_Crash_Data.csv                \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    -H &quot;label:crashdata-0&quot;                  \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    -H &quot;column_separator:,&quot;                 \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    -H &quot;skip_header:1&quot;                      \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    -H &quot;enclose:\&quot;&quot;                         \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    -H &quot;max_filter_ratio:1&quot;                 \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    -H &quot;columns:tmp_CRASH_DATE, tmp_CRASH_TIME, CRASH_DATE=str_to_date(concat_ws(&#x27; &#x27;, tmp_CRASH_DATE, tmp_CRASH_TIME), &#x27;%m/%d/%Y %H:%i&#x27;),BOROUGH,ZIP_CODE,LATITUDE,LONGITUDE,LOCATION,ON_STREET_NAME,CROSS_STREET_NAME,OFF_STREET_NAME,NUMBER_OF_PERSONS_INJURED,NUMBER_OF_PERSONS_KILLED,NUMBER_OF_PEDESTRIANS_INJURED,NUMBER_OF_PEDESTRIANS_KILLED,NUMBER_OF_CYCLIST_INJURED,NUMBER_OF_CYCLIST_KILLED,NUMBER_OF_MOTORIST_INJURED,NUMBER_OF_MOTORIST_KILLED,CONTRIBUTING_FACTOR_VEHICLE_1,CONTRIBUTING_FACTOR_VEHICLE_2,CONTRIBUTING_FACTOR_VEHICLE_3,CONTRIBUTING_FACTOR_VEHICLE_4,CONTRIBUTING_FACTOR_VEHICLE_5,COLLISION_ID,VEHICLE_TYPE_CODE_1,VEHICLE_TYPE_CODE_2,VEHICLE_TYPE_CODE_3,VEHICLE_TYPE_CODE_4,VEHICLE_TYPE_CODE_5&quot; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    -XPUT http://localhost:8030/api/quickstart/crashdata/_stream_load</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Here is the output of the preceding command. The first highlighted section shows what you should expect to see (OK and all but one row inserted). One row was filtered out because it does not contain the correct number of columns.</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Enter host password for user &#x27;root&#x27;:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;TxnId&quot;: 2,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;Label&quot;: &quot;crashdata-0&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;Status&quot;: &quot;Success&quot;,</span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain">    &quot;Message&quot;: &quot;OK&quot;,</span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain">    &quot;NumberTotalRows&quot;: 423726,</span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain">    &quot;NumberLoadedRows&quot;: 423725,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;NumberFilteredRows&quot;: 1,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;NumberUnselectedRows&quot;: 0,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;LoadBytes&quot;: 96227746,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;LoadTimeMs&quot;: 1013,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;BeginTxnTimeMs&quot;: 21,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;StreamLoadPlanTimeMs&quot;: 63,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;ReadDataTimeMs&quot;: 563,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;WriteDataTimeMs&quot;: 870,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;CommitAndPublishTimeMs&quot;: 57,</span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain">    &quot;ErrorURL&quot;: &quot;http://127.0.0.1:8040/api/_load_error_log?file=error_log_da41dd88276a7bfc_739087c94262ae9f&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}%</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>If there was an error the output provides a URL to see the error messages. Open this in a browser to find out what happened. Expand the detail to see the error message:</p>
<details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary>Reading error messages in the browser</summary><div><div class="collapsibleContent_i85q"><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Error: Value count does not match column count. Expect 29, but got 32.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Column delimiter: 44,Row delimiter: 10.. Row: 09/06/2015,14:15,,,40.6722269,-74.0110059,&quot;(40.6722269, -74.0110059)&quot;,,,&quot;R/O 1 BEARD ST. ( IKEA&#x27;S </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">09/14/2015,5:30,BRONX,10473,40.814551,-73.8490955,&quot;(40.814551, -73.8490955)&quot;,TORRY AVENUE                    ,NORTON AVENUE                   ,,0,0,0,0,0,0,0,0,Driver Inattention/Distraction,Unspecified,,,,3297457,PASSENGER VEHICLE,PASSENGER VEHICLE,,,</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div></div></details>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="weather-data-1">Weather data<a href="#weather-data-1" class="hash-link" aria-label="Direct link to Weather data" title="Direct link to Weather data">​</a></h3>
<p>Load the weather dataset in the same manner as you loaded the crash data.</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">curl --location-trusted -u root             \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    -T ./72505394728.csv                    \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    -H &quot;label:weather-0&quot;                    \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    -H &quot;column_separator:,&quot;                 \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    -H &quot;skip_header:1&quot;                      \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    -H &quot;enclose:\&quot;&quot;                         \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    -H &quot;max_filter_ratio:1&quot;                 \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    -H &quot;columns: STATION, DATE, LATITUDE, LONGITUDE, ELEVATION, NAME, REPORT_TYPE, SOURCE, HourlyAltimeterSetting, HourlyDewPointTemperature, HourlyDryBulbTemperature, HourlyPrecipitation, HourlyPresentWeatherType, HourlyPressureChange, HourlyPressureTendency, HourlyRelativeHumidity, HourlySkyConditions, HourlySeaLevelPressure, HourlyStationPressure, HourlyVisibility, HourlyWetBulbTemperature, HourlyWindDirection, HourlyWindGustSpeed, HourlyWindSpeed, Sunrise, Sunset, DailyAverageDewPointTemperature, DailyAverageDryBulbTemperature, DailyAverageRelativeHumidity, DailyAverageSeaLevelPressure, DailyAverageStationPressure, DailyAverageWetBulbTemperature, DailyAverageWindSpeed, DailyCoolingDegreeDays, DailyDepartureFromNormalAverageTemperature, DailyHeatingDegreeDays, DailyMaximumDryBulbTemperature, DailyMinimumDryBulbTemperature, DailyPeakWindDirection, DailyPeakWindSpeed, DailyPrecipitation, DailySnowDepth, DailySnowfall, DailySustainedWindDirection, DailySustainedWindSpeed, DailyWeather, MonthlyAverageRH, MonthlyDaysWithGT001Precip, MonthlyDaysWithGT010Precip, MonthlyDaysWithGT32Temp, MonthlyDaysWithGT90Temp, MonthlyDaysWithLT0Temp, MonthlyDaysWithLT32Temp, MonthlyDepartureFromNormalAverageTemperature, MonthlyDepartureFromNormalCoolingDegreeDays, MonthlyDepartureFromNormalHeatingDegreeDays, MonthlyDepartureFromNormalMaximumTemperature, MonthlyDepartureFromNormalMinimumTemperature, MonthlyDepartureFromNormalPrecipitation, MonthlyDewpointTemperature, MonthlyGreatestPrecip, MonthlyGreatestPrecipDate, MonthlyGreatestSnowDepth, MonthlyGreatestSnowDepthDate, MonthlyGreatestSnowfall, MonthlyGreatestSnowfallDate, MonthlyMaxSeaLevelPressureValue, MonthlyMaxSeaLevelPressureValueDate, MonthlyMaxSeaLevelPressureValueTime, MonthlyMaximumTemperature, MonthlyMeanTemperature, MonthlyMinSeaLevelPressureValue, MonthlyMinSeaLevelPressureValueDate, MonthlyMinSeaLevelPressureValueTime, MonthlyMinimumTemperature, MonthlySeaLevelPressure, MonthlyStationPressure, MonthlyTotalLiquidPrecipitation, MonthlyTotalSnowfall, MonthlyWetBulb, AWND, CDSD, CLDD, DSNW, HDSD, HTDD, NormalsCoolingDegreeDay, NormalsHeatingDegreeDay, ShortDurationEndDate005, ShortDurationEndDate010, ShortDurationEndDate015, ShortDurationEndDate020, ShortDurationEndDate030, ShortDurationEndDate045, ShortDurationEndDate060, ShortDurationEndDate080, ShortDurationEndDate100, ShortDurationEndDate120, ShortDurationEndDate150, ShortDurationEndDate180, ShortDurationPrecipitationValue005, ShortDurationPrecipitationValue010, ShortDurationPrecipitationValue015, ShortDurationPrecipitationValue020, ShortDurationPrecipitationValue030, ShortDurationPrecipitationValue045, ShortDurationPrecipitationValue060, ShortDurationPrecipitationValue080, ShortDurationPrecipitationValue100, ShortDurationPrecipitationValue120, ShortDurationPrecipitationValue150, ShortDurationPrecipitationValue180, REM, BackupDirection, BackupDistance, BackupDistanceUnit, BackupElements, BackupElevation, BackupEquipment, BackupLatitude, BackupLongitude, BackupName, WindEquipmentChangeDate&quot; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    -XPUT http://localhost:8030/api/quickstart/weatherdata/_stream_load</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="answer-some-questions">Answer some questions<a href="#answer-some-questions" class="hash-link" aria-label="Direct link to Answer some questions" title="Direct link to Answer some questions">​</a></h2>
<p>These queries can be run in your SQL client.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="how-many-crashes-are-there-per-hour-in-nyc">How many crashes are there per hour in NYC?<a href="#how-many-crashes-are-there-per-hour-in-nyc" class="hash-link" aria-label="Direct link to How many crashes are there per hour in NYC?" title="Direct link to How many crashes are there per hour in NYC?">​</a></h4>
<div class="language-sql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sql codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">SELECT</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">COUNT</span><span class="token punctuation" style="color:#393A34">(</span><span class="token operator" style="color:#393A34">*</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       date_trunc</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;hour&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> crashdata</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">CRASH_DATE</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">AS</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">Time</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">FROM</span><span class="token plain"> crashdata</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">GROUP</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">BY</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">Time</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">ORDER</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">BY</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">Time</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">ASC</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">LIMIT</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">200</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Here is part of the output. Note that I am looking closer at January 6th and 7th as this is Monday and Tuesday of a non-holiday week. Looking at New Years Day is probably not indicative of a normal morning during rush-hour traffic.</p>
<div class="language-plaintext codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-plaintext codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">|       14 | 2014-01-06 06:00:00 |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|       16 | 2014-01-06 07:00:00 |</span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain">|       43 | 2014-01-06 08:00:00 |</span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain">|       44 | 2014-01-06 09:00:00 |</span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain">|       21 | 2014-01-06 10:00:00 |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|       28 | 2014-01-06 11:00:00 |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|       34 | 2014-01-06 12:00:00 |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|       31 | 2014-01-06 13:00:00 |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|       35 | 2014-01-06 14:00:00 |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|       36 | 2014-01-06 15:00:00 |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|       33 | 2014-01-06 16:00:00 |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|       40 | 2014-01-06 17:00:00 |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|       35 | 2014-01-06 18:00:00 |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|       23 | 2014-01-06 19:00:00 |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|       16 | 2014-01-06 20:00:00 |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|       12 | 2014-01-06 21:00:00 |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|       17 | 2014-01-06 22:00:00 |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|       14 | 2014-01-06 23:00:00 |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|       10 | 2014-01-07 00:00:00 |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|        4 | 2014-01-07 01:00:00 |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|        1 | 2014-01-07 02:00:00 |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|        3 | 2014-01-07 03:00:00 |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|        2 | 2014-01-07 04:00:00 |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|        6 | 2014-01-07 06:00:00 |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|       16 | 2014-01-07 07:00:00 |</span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain">|       41 | 2014-01-07 08:00:00 |</span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain">|       37 | 2014-01-07 09:00:00 |</span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain">|       33 | 2014-01-07 10:00:00 |</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>It looks like about 40 accidents on a Monday or Tuesday morning during rush hour traffic, and around the same at 17:00 hours.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="what-is-the-average-temperature-in-nyc">What is the average temperature in NYC?<a href="#what-is-the-average-temperature-in-nyc" class="hash-link" aria-label="Direct link to What is the average temperature in NYC?" title="Direct link to What is the average temperature in NYC?">​</a></h4>
<div class="language-sql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sql codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">SELECT</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">avg</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">HourlyDryBulbTemperature</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       date_trunc</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;hour&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> weatherdata</span><span class="token punctuation" style="color:#393A34">.</span><span class="token keyword" style="color:#00009f">DATE</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">AS</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">Time</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">FROM</span><span class="token plain"> weatherdata</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">GROUP</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">BY</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">Time</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">ORDER</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">BY</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">Time</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">ASC</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">LIMIT</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">100</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Output:</p>
<p>Note that this is data from 2014, NYC has not been this cold lately.</p>
<div class="language-plaintext codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-plaintext codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">+-------------------------------+---------------------+</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| avg(HourlyDryBulbTemperature) | Time                |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">+-------------------------------+---------------------+</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|                            25 | 2014-01-01 00:00:00 |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|                            25 | 2014-01-01 01:00:00 |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|                            24 | 2014-01-01 02:00:00 |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|                            24 | 2014-01-01 03:00:00 |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|                            24 | 2014-01-01 04:00:00 |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|                            24 | 2014-01-01 05:00:00 |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|                            25 | 2014-01-01 06:00:00 |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|                            26 | 2014-01-01 07:00:00 |</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="is-it-safe-to-drive-in-nyc-when-visibility-is-poor">Is it safe to drive in NYC when visibility is poor?<a href="#is-it-safe-to-drive-in-nyc-when-visibility-is-poor" class="hash-link" aria-label="Direct link to Is it safe to drive in NYC when visibility is poor?" title="Direct link to Is it safe to drive in NYC when visibility is poor?">​</a></h4>
<p>Let&#x27;s look at the number of crashes when visibility is poor (between 0 and 1.0 miles). To answer this question use a JOIN across the two tables on the DATETIME column.</p>
<div class="language-sql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sql codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">SELECT</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">COUNT</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">DISTINCT</span><span class="token plain"> c</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">COLLISION_ID</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">AS</span><span class="token plain"> Crashes</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       </span><span class="token keyword" style="color:#00009f">truncate</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">avg</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">w</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">HourlyDryBulbTemperature</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">AS</span><span class="token plain"> Temp_F</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       </span><span class="token keyword" style="color:#00009f">truncate</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">avg</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">w</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">HourlyVisibility</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">AS</span><span class="token plain"> Visibility</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       </span><span class="token function" style="color:#d73a49">max</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">w</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">HourlyPrecipitation</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">AS</span><span class="token plain"> Precipitation</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       date_format</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">date_trunc</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;hour&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> c</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">CRASH_DATE</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;%d %b %Y %H:%i&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">AS</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">Hour</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">FROM</span><span class="token plain"> crashdata c</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">LEFT</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">JOIN</span><span class="token plain"> weatherdata w</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">ON</span><span class="token plain"> date_trunc</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;hour&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> c</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">CRASH_DATE</span><span class="token punctuation" style="color:#393A34">)</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">date_trunc</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;hour&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> w</span><span class="token punctuation" style="color:#393A34">.</span><span class="token keyword" style="color:#00009f">DATE</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">WHERE</span><span class="token plain"> w</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">HourlyVisibility </span><span class="token operator" style="color:#393A34">BETWEEN</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0.0</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">AND</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1.0</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">GROUP</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">BY</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">Hour</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">ORDER</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">BY</span><span class="token plain"> Crashes </span><span class="token keyword" style="color:#00009f">DESC</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">LIMIT</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">100</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>The highest number of crashes in a single hour during low visibility is 129. There are multiple things to consider:</p>
<ul>
<li>February 3rd 2014 was a Monday</li>
<li>8AM is rush hour</li>
<li>It was raining (0.12 inches or precipitation that hour)</li>
<li>The temperature is 32 degrees F (the freezing point for water)</li>
<li>Visibility is bad at 0.25 miles, normal for NYC is 10 miles</li>
</ul>
<div class="language-plaintext codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-plaintext codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">+---------+--------+------------+---------------+-------------------+</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| Crashes | Temp_F | Visibility | Precipitation | Hour              |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">+---------+--------+------------+---------------+-------------------+</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|     129 |     32 |       0.25 | 0.12          | 03 Feb 2014 08:00 |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|     114 |     32 |       0.25 | 0.12          | 03 Feb 2014 09:00 |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|     104 |     23 |       0.33 | 0.03          | 09 Jan 2015 08:00 |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|      96 |   26.3 |       0.33 | 0.07          | 01 Mar 2015 14:00 |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|      95 |     26 |       0.37 | 0.12          | 01 Mar 2015 15:00 |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|      93 |     35 |       0.75 | 0.09          | 18 Jan 2015 09:00 |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|      92 |     31 |       0.25 | 0.12          | 03 Feb 2014 10:00 |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|      87 |   26.8 |        0.5 | 0.09          | 01 Mar 2015 16:00 |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|      85 |     55 |       0.75 | 0.20          | 23 Dec 2015 17:00 |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|      85 |     20 |       0.62 | 0.01          | 06 Jan 2015 11:00 |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|      83 |   19.6 |       0.41 | 0.04          | 05 Mar 2015 13:00 |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|      80 |     20 |       0.37 | 0.02          | 06 Jan 2015 10:00 |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|      76 |   26.5 |       0.25 | 0.06          | 05 Mar 2015 09:00 |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|      71 |     26 |       0.25 | 0.09          | 05 Mar 2015 10:00 |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|      71 |   24.2 |       0.25 | 0.04          | 05 Mar 2015 11:00 |</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="what-about-driving-in-icy-conditions">What about driving in icy conditions?<a href="#what-about-driving-in-icy-conditions" class="hash-link" aria-label="Direct link to What about driving in icy conditions?" title="Direct link to What about driving in icy conditions?">​</a></h4>
<p>Water vapor can desublimate to ice at 40 degrees F; this query looks at temps between 0 and 40 degrees F.</p>
<div class="language-sql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sql codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">SELECT</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">COUNT</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">DISTINCT</span><span class="token plain"> c</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">COLLISION_ID</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">AS</span><span class="token plain"> Crashes</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       </span><span class="token keyword" style="color:#00009f">truncate</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">avg</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">w</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">HourlyDryBulbTemperature</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">AS</span><span class="token plain"> Temp_F</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       </span><span class="token keyword" style="color:#00009f">truncate</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">avg</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">w</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">HourlyVisibility</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">AS</span><span class="token plain"> Visibility</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       </span><span class="token function" style="color:#d73a49">max</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">w</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">HourlyPrecipitation</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">AS</span><span class="token plain"> Precipitation</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       date_format</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">date_trunc</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;hour&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> c</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">CRASH_DATE</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;%d %b %Y %H:%i&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">AS</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">Hour</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">FROM</span><span class="token plain"> crashdata c</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">LEFT</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">JOIN</span><span class="token plain"> weatherdata w</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">ON</span><span class="token plain"> date_trunc</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;hour&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> c</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">CRASH_DATE</span><span class="token punctuation" style="color:#393A34">)</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">date_trunc</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;hour&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> w</span><span class="token punctuation" style="color:#393A34">.</span><span class="token keyword" style="color:#00009f">DATE</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">WHERE</span><span class="token plain"> w</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">HourlyDryBulbTemperature </span><span class="token operator" style="color:#393A34">BETWEEN</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0.0</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">AND</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">40.5</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">GROUP</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">BY</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">Hour</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">ORDER</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">BY</span><span class="token plain"> Crashes </span><span class="token keyword" style="color:#00009f">DESC</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">LIMIT</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">100</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>The results for freezing temperatures suprised me a little, I did not expect too much traffic on a Sunday morning in the city on a cold January day.A quick look at <a href="https://weather.com/storms/winter/news/northeast-storm-rain-snow-wind" target="_blank" rel="noopener noreferrer">weather.com</a> showed that there was a big storm with many crashes that day, just like what can be seen in the data.</p>
<div class="language-plaintext codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-plaintext codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">+---------+--------+------------+---------------+-------------------+</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| Crashes | Temp_F | Visibility | Precipitation | Hour              |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">+---------+--------+------------+---------------+-------------------+</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|     192 |     34 |        1.5 | 0.09          | 18 Jan 2015 08:00 |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|     170 |     21 |       NULL |               | 21 Jan 2014 10:00 |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|     145 |     19 |       NULL |               | 21 Jan 2014 11:00 |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|     138 |   33.5 |          5 | 0.02          | 18 Jan 2015 07:00 |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|     137 |     21 |       NULL |               | 21 Jan 2014 09:00 |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|     129 |     32 |       0.25 | 0.12          | 03 Feb 2014 08:00 |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|     114 |     32 |       0.25 | 0.12          | 03 Feb 2014 09:00 |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|     104 |     23 |        0.7 | 0.04          | 09 Jan 2015 08:00 |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|      98 |     16 |          8 | 0.00          | 06 Mar 2015 08:00 |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|      96 |   26.3 |       0.33 | 0.07          | 01 Mar 2015 14:00 |</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Drive carefully!</p>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="summary">Summary<a href="#summary" class="hash-link" aria-label="Direct link to Summary" title="Direct link to Summary">​</a></h2>
<p>In this tutorial you:</p>
<ul>
<li>Deployed StarRocks in Docker</li>
<li>Loaded crash data provided by New York City and weather data provided by NOAA</li>
<li>Analyzed the data using SQL JOINs to find out that driving in low visibility or icy streets is a bad idea</li>
</ul>
<p>There is more to learn; we intentionally glossed over the data transformation done during the Stream Load. The details on that are in the notes on the curl commands below.</p>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="notes-on-the-curl-commands">Notes on the curl commands<a href="#notes-on-the-curl-commands" class="hash-link" aria-label="Direct link to Notes on the curl commands" title="Direct link to Notes on the curl commands">​</a></h2>
<p>StarRocks Stream Load and curl take many arguments. Only the ones used in this tutorial are described here, the rest will be linked to in the more information section.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="--location-trusted"><code>--location-trusted</code><a href="#--location-trusted" class="hash-link" aria-label="Direct link to --location-trusted" title="Direct link to --location-trusted">​</a></h4>
<p>This configures curl to pass credentials to any redirected URLs.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="-u-root"><code>-u root</code><a href="#-u-root" class="hash-link" aria-label="Direct link to -u-root" title="Direct link to -u-root">​</a></h4>
<p>The username used to log in to StarRocks</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="-t-filename"><code>-T filename</code><a href="#-t-filename" class="hash-link" aria-label="Direct link to -t-filename" title="Direct link to -t-filename">​</a></h4>
<p>T is for transfer, the filename to transfer.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="labelname-num"><code>label:name-num</code><a href="#labelname-num" class="hash-link" aria-label="Direct link to labelname-num" title="Direct link to labelname-num">​</a></h4>
<p>The label to associate with this Stream Load job. The label must be unique, so if you run the job multiple times you can add a number and keep incrementing that.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="column_separator"><code>column_separator:,</code><a href="#column_separator" class="hash-link" aria-label="Direct link to column_separator" title="Direct link to column_separator">​</a></h4>
<p>If you load a file that uses a single <code>,</code> then set it as shown above, if you use a different delimiter then set that delimiter here. Common choices are <code>\t</code>, <code>,</code>, and <code>|</code>.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="skip_header1"><code>skip_header:1</code><a href="#skip_header1" class="hash-link" aria-label="Direct link to skip_header1" title="Direct link to skip_header1">​</a></h4>
<p>Some CSV files have a single header row with all of the column names listed, and some add a second line with datatypes. Set skip_header to <code>1</code> or <code>2</code> if you have one or two header lines, and set it to <code>0</code> if you have none.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="enclose"><code>enclose:\&quot;</code><a href="#enclose" class="hash-link" aria-label="Direct link to enclose" title="Direct link to enclose">​</a></h4>
<p>It is common to enclose strings that contain embedded commas with double-quotes. The sample datasets used in this tutorial have geo locations that contain commas and so the enclose setting is set to <code>\&quot;</code>. Remember to escape the <code>&quot;</code> with a <code>\</code>.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="max_filter_ratio1"><code>max_filter_ratio:1</code><a href="#max_filter_ratio1" class="hash-link" aria-label="Direct link to max_filter_ratio1" title="Direct link to max_filter_ratio1">​</a></h4>
<p>This allows some errors in the data. Ideally this would be set to <code>0</code> and the job would fail with any errors. It is set to <code>1</code> to allow all rows to fail during debugging.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="columns"><code>columns:</code><a href="#columns" class="hash-link" aria-label="Direct link to columns" title="Direct link to columns">​</a></h4>
<p>The mapping of CSV file columns to StarRocks table columns. You will notice that there are many more columns in the CSV files than columns in the table. Any columns that are not included in the table are skipped.</p>
<p>You will also notice that there is some transformation of data included in the <code>columns:</code> line for the crash dataset. It is very common to find dates and times in CSV files that do not conform to standards. This is the logic for converting the CSV data for the time and date of the crash to a DATETIME type:</p>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="the-columns-line">The columns line<a href="#the-columns-line" class="hash-link" aria-label="Direct link to The columns line" title="Direct link to The columns line">​</a></h5>
<p>This is the beginning of one data record. The date is in <code>MM/DD/YYYY</code> format, and the time is <code>HH:MI</code>. Since DATETIME is generally <code>YYYY-MM-DD HH:MI:SS</code> we need to transform this data.</p>
<div class="language-plaintext codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-plaintext codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">08/05/2014,9:10,BRONX,10469,40.8733019,-73.8536375,&quot;(40.8733019, -73.8536375)&quot;,</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>This is the beginning of the <code>columns:</code> parameter:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">-H &quot;columns:tmp_CRASH_DATE, tmp_CRASH_TIME, CRASH_DATE=str_to_date(concat_ws(&#x27; &#x27;, tmp_CRASH_DATE, tmp_CRASH_TIME), &#x27;%m/%d/%Y %H:%i&#x27;)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>This instructs StarRocks to:</p>
<ul>
<li>Assign the content of the first column of the CSV file to <code>tmp_CRASH_DATE</code></li>
<li>Assign the content of the second column of the CSV file to <code>tmp_CRASH_TIME</code></li>
<li><code>concat_ws()</code> concatenates <code>tmp_CRASH_DATE</code> and <code>tmp_CRASH_TIME</code> together with a space between them</li>
<li><code>str_to_date()</code> creates a DATETIME from the concatenated string</li>
<li>store the resulting DATETIME in the column <code>CRASH_DATE</code></li>
</ul>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="more-information">More information<a href="#more-information" class="hash-link" aria-label="Direct link to More information" title="Direct link to More information">​</a></h2>
<p><a href="/SingleSourceCodeTestingAndDocs/table_design/StarRocks_table_design.md">StarRocks table design</a></p>
<p><a href="/SingleSourceCodeTestingAndDocs/cover_pages/mv_use_cases.mdx">Materialized views</a></p>
<p><a href="/SingleSourceCodeTestingAndDocs/sql-reference/sql-statements/data-manipulation/STREAM_LOAD.md">Stream Load</a></p>
<p>The <a href="https://data.cityofnewyork.us/Public-Safety/Motor-Vehicle-Collisions-Crashes/h9gi-nx95" target="_blank" rel="noopener noreferrer">Motor Vehicle Collisions - Crashes</a> dataset is provided by New York City subject to these <a href="https://www.nyc.gov/home/terms-of-use.page" target="_blank" rel="noopener noreferrer">terms of use</a> and <a href="https://www.nyc.gov/home/privacy-policy.page" target="_blank" rel="noopener noreferrer">privacy policy</a>.</p>
<p>The <a href="https://www.ncdc.noaa.gov/cdo-web/datatools/lcd" target="_blank" rel="noopener noreferrer">Local Climatological Data</a>(LCD) is provided by NOAA with this <a href="https://www.noaa.gov/disclaimer" target="_blank" rel="noopener noreferrer">disclaimer</a> and this <a href="https://www.noaa.gov/protecting-your-privacy" target="_blank" rel="noopener noreferrer">privacy policy</a>.</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/shared-nothing.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_vwxv"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/SingleSourceCodeTestingAndDocs/docs"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Embedding snippets of code from GitHub</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#prerequisites" class="table-of-contents__link toc-highlight">Prerequisites</a><ul><li><a href="#docker" class="table-of-contents__link toc-highlight">Docker</a></li><li><a href="#sql-client" class="table-of-contents__link toc-highlight">SQL client</a></li><li><a href="#curl" class="table-of-contents__link toc-highlight">curl</a></li></ul></li><li><a href="#terminology" class="table-of-contents__link toc-highlight">Terminology</a><ul><li><a href="#fe" class="table-of-contents__link toc-highlight">FE</a></li><li><a href="#be" class="table-of-contents__link toc-highlight">BE</a></li></ul></li><li><a href="#launch-starrocks" class="table-of-contents__link toc-highlight">Launch StarRocks</a></li><li><a href="#sql-clients" class="table-of-contents__link toc-highlight">SQL clients</a></li><li><a href="#download-the-data" class="table-of-contents__link toc-highlight">Download the data</a><ul><li><a href="#new-york-city-crash-data" class="table-of-contents__link toc-highlight">New York City crash data</a></li><li><a href="#weather-data" class="table-of-contents__link toc-highlight">Weather data</a></li><li><a href="#connect-to-starrocks-with-a-sql-client" class="table-of-contents__link toc-highlight">Connect to StarRocks with a SQL client</a></li></ul></li><li><a href="#create-some-tables" class="table-of-contents__link toc-highlight">Create some tables</a></li><li><a href="#load-two-datasets" class="table-of-contents__link toc-highlight">Load two datasets</a><ul><li><a href="#new-york-city-collision-data---crashes" class="table-of-contents__link toc-highlight">New York City collision data - Crashes</a></li><li><a href="#weather-data-1" class="table-of-contents__link toc-highlight">Weather data</a></li></ul></li><li><a href="#answer-some-questions" class="table-of-contents__link toc-highlight">Answer some questions</a></li><li><a href="#summary" class="table-of-contents__link toc-highlight">Summary</a></li><li><a href="#notes-on-the-curl-commands" class="table-of-contents__link toc-highlight">Notes on the curl commands</a></li><li><a href="#more-information" class="table-of-contents__link toc-highlight">More information</a></li></ul></div></div></div></div></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://stackoverflow.com/questions/tagged/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">Stack Overflow<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://discordapp.com/invite/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">Discord<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://twitter.com/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/facebook/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2024 My Project, Inc. Built with Docusaurus.</div></div></div></footer></div>
</body>
</html>